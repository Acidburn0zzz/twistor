"use strict";function _toConsumableArray(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return Array.from(a)}var dom={get:function(a){return document.getElementById(a)},add:function(a){for(var b=arguments.length,c=Array(b>1?b-1:0),d=1;b>d;d++)c[d-1]=arguments[d];return c.forEach(function(b){return a.appendChild(b)})},elem:function(a){for(var b=arguments.length,c=Array(b>1?b-1:0),d=1;b>d;d++)c[d-1]=arguments[d];var e=document.createElement(a);return c.forEach(function(a){return Object.keys(a).forEach(function(b){return e.setAttribute(b,a[b])})}),e},text:function(a){return document.createTextNode(a)},drop:function(a){for(var b=arguments.length,c=Array(b>1?b-1:0),d=1;b>d;d++)c[d-1]=arguments[d];if(0===c.length)for(;a.firstChild;)a.removeChild(a.firstChild);else c.forEach(function(b){return a.removeChild(b)});return a}},ajax=function(a,b){return new Promise(function(c,d){var e=new XMLHttpRequest;e.open(a,b,!0),e.onreadystatechange=function(){if(4==e.readyState)if(e.status>=200&&e.status<400)try{var a=JSON.parse(e.response);c(a)}catch(b){d(b)}else d(new Error(e.url+" failed: "+e.status+" "+e.statusText))},e.send()})},lookup=function(a){var b=_(dom.get(a)).where({name:"grabthis"}).filter(function(a){return a.value}).filter(function(a){return"handle"!=a.id}).map(function(a){return[a.id,"checkbox"==a.type?a.checked:a.value].join("=")}).join("&");ajax("GET","/api?"+b).then(populateTable)["catch"](function(a){return console.log(a)})},prettyDate=function(a){return new Date(parseInt(a,10)).toISOString().slice(0,18)},prettyTime=function(a){var b=parseInt(a,10)/1e3,c=b/60,d=c/60,e=d/24,f=e/30,g=e/365,h=function(a,b){return a=Math.round(a),"~"+a+" "+b+(1==a?"":"s")};return 1>c?h(b,"second"):1>d?h(c,"minute"):1>e?h(d,"hour"):1>f?h(e,"day"):1>g?h(f,"month"):h(g,"year")},makeRow=function(a){var b=dom.elem("tr"),c=dom.elem("td");dom.add(c,dom.elem("img",{src:a.avatar}));var d=dom.elem("td");dom.add(d,dom.text(a.name),dom.elem("br"),dom.text("@"+a.screen_name));var e=dom.elem("td",{rowspan:2,style:"width: 60%;"});dom.add(e,dom.text(a.tweet));var f=dom.elem("td",{rowspan:2,style:"width: 20%;"});dom.add(f,dom.text("tweeted: "+prettyDate(a.tweet_time)),dom.elem("br"),dom.text("deleted: "+prettyDate(a.delete_time)),dom.elem("br"),dom.text(prettyTime(a.time_diff)),dom.elem("br")),dom.add(b,c,d,e,f);var g=dom.elem("tr"),h=dom.elem("td",{colspan:2});return dom.add(h,dom.text(a.description)),dom.add(g,h),[b,g]},populateTable=function(a){var b=dom.get("resultsTable");dom.drop(b);var c=_(a).map(function(a){return makeRow(a)}).flatten().value();dom.add.apply(dom,[b].concat(_toConsumableArray(c)))};
//# sourceMappingURL=script.js.map